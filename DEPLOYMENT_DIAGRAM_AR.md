# Ù…Ø®Ø·Ø· Ø§Ù„Ù€ Deployment ğŸ“Š

## Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…                             â”‚
â”‚                         (Browser)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTPS
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Vercel (Frontend)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø´ØºØ§Ù„Ø©:                                      â”‚   â”‚
â”‚  â”‚  4pixels-git-main-mohs-projects-0b03337a.vercel.app  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (ÙÙŠÙ‡Ø§ Ù…Ø´Ø§ÙƒÙ„):                      â”‚   â”‚
â”‚  â”‚  4pixels-two.vercel.app                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  - React App                                                 â”‚
â”‚  - Static Files                                              â”‚
â”‚  - Environment: REACT_APP_API_URL                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ API Calls
                     â”‚ (CORS Protected)
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Railway (Backend)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  4pixels-production.up.railway.app                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  - Node.js + Express                                         â”‚
â”‚  - CORS Configuration                                        â”‚
â”‚  - JWT Authentication                                        â”‚
â”‚  - REST API Endpoints                                        â”‚
â”‚                                                              â”‚
â”‚  Environment Variables:                                      â”‚
â”‚  â”œâ”€ CORS_ORIGIN                                              â”‚
â”‚  â”œâ”€ FRONTEND_URL                                             â”‚
â”‚  â”œâ”€ JWT_SECRET                                               â”‚
â”‚  â”œâ”€ NODE_ENV                                                 â”‚
â”‚  â””â”€ PORT (auto)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ File System
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  JSON Database                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  server/data/                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ services.json                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ projects.json                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ reviews.json                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ messages.json                                    â”‚   â”‚
â”‚  â”‚  â””â”€ users.json                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Data Flow)

### 1. Ø·Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø§Øª (Get Services)
```
User Browser
    â”‚
    â”‚ GET /services
    â–¼
Vercel Frontend
    â”‚
    â”‚ axios.get('/api/services')
    â”‚ URL: https://4pixels-production.up.railway.app/api/services
    â–¼
Railway Backend
    â”‚
    â”‚ CORS Check âœ…
    â”‚ Read services.json
    â–¼
JSON Database
    â”‚
    â”‚ Return data
    â–¼
Railway Backend
    â”‚
    â”‚ Send JSON response
    â–¼
Vercel Frontend
    â”‚
    â”‚ Display services
    â–¼
User Browser
```

### 2. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Login)
```
User Browser
    â”‚
    â”‚ POST /login
    â”‚ { email, password }
    â–¼
Vercel Frontend
    â”‚
    â”‚ axios.post('/api/auth/login')
    â–¼
Railway Backend
    â”‚
    â”‚ CORS Check âœ…
    â”‚ Validate credentials
    â”‚ Read users.json
    â”‚ Compare bcrypt hash
    â–¼
JSON Database
    â”‚
    â”‚ User found âœ…
    â–¼
Railway Backend
    â”‚
    â”‚ Generate JWT token
    â”‚ Send { token, user }
    â–¼
Vercel Frontend
    â”‚
    â”‚ Store token in localStorage
    â”‚ Redirect to /admin
    â–¼
User Browser
```

---

## Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© âŒ

```
Vercel (4pixels-two.vercel.app)
    â”‚
    â”‚ Request to Railway
    â–¼
Railway Backend
    â”‚
    â”‚ CORS Check âŒ
    â”‚ Origin not in allowedOrigins
    â”‚
    â””â”€> Error: Not allowed by CORS
```

**Ø§Ù„Ø³Ø¨Ø¨**:
- Railway Variables ÙÙŠÙ‡Ø§ `FRONTEND_UR` (Ø®Ø·Ø£ Ø¥Ù…Ù„Ø§Ø¦ÙŠ)
- Ù…ÙÙŠØ´ `JWT_SECRET`
- `CORS_ORIGIN` Ù…Ø´ Ù…Ø¸Ø¨ÙˆØ·

---

## Ø§Ù„Ø­Ù„ âœ…

```
Vercel (4pixels-git-main-mohs-projects-0b03337a.vercel.app)
    â”‚
    â”‚ Request to Railway
    â–¼
Railway Backend
    â”‚
    â”‚ CORS Check âœ…
    â”‚ Origin in allowedOrigins
    â”‚ OR origin.includes('vercel.app')
    â”‚
    â””â”€> Allow request âœ…
```

**Ø§Ù„Ø¥ØµÙ„Ø§Ø­**:
1. Ø­Ø°Ù `FRONTEND_UR`
2. ØªØ­Ø¯ÙŠØ« `CORS_ORIGIN` Ùˆ `FRONTEND_URL`
3. Ø¥Ø¶Ø§ÙØ© `JWT_SECRET`
4. Redeploy

---

## API Endpoints

### Public (Ø¨Ø¯ÙˆÙ† Authentication)
```
GET  /api/services          - ÙƒÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
GET  /api/services/:id      - Ø®Ø¯Ù…Ø© ÙˆØ§Ø­Ø¯Ø©
GET  /api/projects          - ÙƒÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
GET  /api/projects/:id      - Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ø­Ø¯
GET  /api/reviews           - ÙƒÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
GET  /api/reviews/active    - Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
POST /api/messages          - Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
POST /api/auth/login        - ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
```

### Protected (ÙŠØ­ØªØ§Ø¬ Token)
```
POST   /api/services        - Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©
PUT    /api/services/:id    - ØªØ¹Ø¯ÙŠÙ„ Ø®Ø¯Ù…Ø©
DELETE /api/services/:id    - Ø­Ø°Ù Ø®Ø¯Ù…Ø©

POST   /api/projects        - Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹
PUT    /api/projects/:id    - ØªØ¹Ø¯ÙŠÙ„ Ù…Ø´Ø±ÙˆØ¹
DELETE /api/projects/:id    - Ø­Ø°Ù Ù…Ø´Ø±ÙˆØ¹

POST   /api/reviews         - Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ…
PUT    /api/reviews/:id     - ØªØ¹Ø¯ÙŠÙ„ ØªÙ‚ÙŠÙŠÙ…
PATCH  /api/reviews/:id/toggle - ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„
DELETE /api/reviews/:id     - Ø­Ø°Ù ØªÙ‚ÙŠÙŠÙ…

GET    /api/messages        - ÙƒÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
DELETE /api/messages/:id    - Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø©
```

---

## Environment Variables

### Vercel (Frontend)
```env
REACT_APP_API_URL=https://4pixels-production.up.railway.app/api
```

### Railway (Backend)
```env
# Required
CORS_ORIGIN=https://4pixels-git-main-mohs-projects-0b03337a.vercel.app
FRONTEND_URL=https://4pixels-git-main-mohs-projects-0b03337a.vercel.app
NODE_ENV=production
JWT_SECRET=4pixels-secret-key-2024-mohammed-ahmed
PORT=5001 (auto)

# Optional
SUPABASE_URL=https://kkwsonkyoaubyzkvfftl.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=sb_publishable_64PNNISj3KMJXAubknLRVQ...
```

---

## Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù‡Ù…Ø©

### Frontend
```
client/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api.js              â† API configuration
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Home.jsx            â† Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”‚   â”‚   â”œâ”€â”€ Admin.jsx           â† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
â”‚   â”‚   â”œâ”€â”€ Login.jsx           â† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
â”‚   â”‚   â”œâ”€â”€ Services.jsx        â† Ø§Ù„Ø®Ø¯Ù…Ø§Øª
â”‚   â”‚   â””â”€â”€ Projects.jsx        â† Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
â”‚   â””â”€â”€ context/
â”‚       â””â”€â”€ AuthContext.jsx     â† Authentication
â”œâ”€â”€ .env.production             â† Production variables
â””â”€â”€ package.json
```

### Backend
```
server/
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js                 â† Authentication
â”‚   â”œâ”€â”€ services.js             â† Services CRUD
â”‚   â”œâ”€â”€ projects.js             â† Projects CRUD
â”‚   â”œâ”€â”€ reviews.js              â† Reviews CRUD
â”‚   â””â”€â”€ messages.js             â† Messages CRUD
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ users.json              â† Admin credentials
â”‚   â”œâ”€â”€ services.json           â† Services data
â”‚   â”œâ”€â”€ projects.json           â† Projects data
â”‚   â”œâ”€â”€ reviews.json            â† Reviews data
â”‚   â””â”€â”€ messages.json           â† Messages data
â”œâ”€â”€ server.js                   â† Main server file
â””â”€â”€ package.json
```

---

## Ø§Ù„Ø®Ù„Ø§ØµØ©

### Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:
- âœ… Backend Ø´ØºØ§Ù„ Ø¹Ù„Ù‰ Railway
- âœ… Frontend Ø´ØºØ§Ù„ Ø¹Ù„Ù‰ Vercel (Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ©)
- âŒ CORS Ø¨ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„

### Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­:
- âœ… Backend Ø´ØºØ§Ù„
- âœ… Frontend Ø´ØºØ§Ù„
- âœ… CORS ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„
- âœ… ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¸Ù‡Ø±
- âœ… Login ÙŠØ´ØªØºÙ„

---

**Ù„Ù„Ø¥ØµÙ„Ø§Ø­**: Ø´ÙˆÙ `RAILWAY_FIX_STEPS_AR.md`
